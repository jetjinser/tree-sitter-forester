\title{partial functional extensionality}
\date{2024-01-22}
\author{jonmsterling}
\contributor{marcelofiore}
\taxon{lemma}
\import{jms-00JB}

\p{Let #{f,g\colon A\pto B} be two [partial functions](jms-00K7). We have #{f=g} if and only if for all #{a\in A}, #{f} is [defined](jms-00KA) at #{a} if and only if #{g} is defined at #{a} and, moreover, the [value](jms-00KA) of #{f} at #{a} is the same as the [value](jms-00KA) of #{g} at #{a}:}

##{
 f=g
 \Longleftrightarrow
 \forall a\in A\punctdot
 \prn{
  \is-defined{f\prn{a}} \Leftrightarrow \is-defined{g\prn{a}}
 }
 \land
 f\prn{a} = g\prn{a}
}

\proof{
 \p{
  One direction is trivial. In the other direction, we assume
  ##{
   \forall a\in A\punctdot
   \prn{
    \is-defined{f\prn{a}} \Leftrightarrow \is-defined{g\prn{a}}
   }
   \land
   f\prn{a} = g\prn{a}
  }
  to deduce #{f=g}. By [relational extensionality](jms-00IM), it suffices to show
  ##{
   \forall a\in A\punctdot
   \forall b\in B\punctdot
   a\mathrel{f}b \Longleftrightarrow a\mathrel{g}b.
  }
 }

 \p{Fixing #{a\in A} and #{b\in B}, we assume #{a\mathrel{f} b} to prove #{a\mathrel{g}b}. By assumption, we deduce #{\is-defined{g\prn{a}}} from #{\is-defined{f\prn{a}}}, so there exists #{b'=g\prn{a}} such that #{a\mathrel{g}b'}. By our other assumption, we know that #{f\prn{a}=g\prn{a}}, so we conclude #{a\mathrel{g}b}. The other direction works the same way.}
}
