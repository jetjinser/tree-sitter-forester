\title{two statements of the Phoa principle}
\date{2024-02-12}
\author{jonmsterling}
\taxon{lemma}

\import{erct-macros}
\def\II{#{\mathbb{I}}}

\p{Let \II be an interval object with distinct endpoints #{0,1}; write #{\brk{-}\colon\II\hookrightarrow \type-of-props} for the embedding sending #{x:\II} to \prn{x=1}. We then inherit a partial order #{\leq} on #{\II} from the implication order along #{\brk{-}}. We will write #{\II_2} for the subset type \compr{\prn{x,y}:\II\times\II}{x \leq y}.}

\p{Further assume that #{\leq} is closed under disjunction and conjunction in #{\type-of-props}. Then the following are equivalent:}

\ol{
 \li{For all #{\phi\colon \II\to \II}, we have #{\phi = \lam{x} \phi\prn{0} \lor\prn{x\land \phi\prn{1}}}.}
 \li{The evaluation map #{\prn{0,1}^*\colon \II^\II\to \II\times\II} factors through the inclusion #{\iota_2\colon \II_2 \hookrightarrow \II\times\II} along an isomorphism #{H\colon \II^\II\to \II_2}.}
}

\subtree{
 \taxon{proof}
 \title{forward direction}

 \p{First we check that for each #{\phi\colon \II^\II}, we have #{\phi\prn{0}\leq \phi\prn{1}}. We calculate using our assumption:}

 ##{
  \begin{aligned}
   \phi\prn{0}
   &\leq \phi\prn{0}\lor\prn{1\land \phi\prn{1}}\\
   &= \phi\prn{1}
  \end{aligned}
 }

 \p{Therefore, #{\prn{0,1}^*\colon \II^\II\to \II\times\II} factors through #{\iota_2\colon \II_2 \hookrightarrow \II\times\II} along some map #{H\colon \II^\II\to \II_2}. We will show that #{H} is an isomorphism by explicitly defining an inverse #{H\inv \colon \II_2\to \II^\II}:}

 ##{
  H\inv\prn{x\leq y} :\equiv \lam{z} x \lor \prn{z\land y}
 }

 \p{To check that #{H\circ H\inv = \idn{\II_2}}, it suffices to show that #{\iota_2\circ H\circ H\inv = \iota_2}.}
 ##{
  \begin{aligned}
   \iota_2\prn{H\prn{H\inv\prn{x\leq y}}}
   &=
   \prn{0,1}^*\prn{H\inv\prn{x\leq y}}
   \\
   &= \prn{0,1}^*\prn{\lam{z} x \lor \prn{z\land y}}
   \\
   &= \prn{x\lor\prn{0 \land y}, x\lor\prn{1\land y}}
   \\
   &= \prn{x, x\lor y}
   \\
   &= \prn{x,y}
   \\
   &= \iota_2\prn{x\leq y}
  \end{aligned}
 }

 \p{To check that #{H\inv\circ H = \idn{\II^\II}}, we fix #{\phi:\II^\II} and compute using our assumption:}
 ##{
  \begin{aligned}
    H\inv\prn{H\prn{\phi}}
    &= H\inv\prn{\phi\prn{0}\leq\phi\prn{1}}
    \\
    &= \lam{z} \phi\prn{0}\lor\prn{z\land \phi\prn{1}}
    \\
    &= \phi
  \end{aligned}
 }
}

\subtree{
 \taxon{proof}
 \title{backward direction}

 \p{Assuming the described factorisation property, we fix #{\phi\colon \II\to\II} to check that #{\phi = \lam{x}\phi\prn{0}\lor\prn{x\land \phi\prn{1}}}. Because #{H\colon \II^\II\to \II_2} is an isomorphism (and therefore an embedding), it follows that #{\prn{0,1}^*\colon \II^\II\to\II\times\II} is an embedding. Therefore it suffices to show that #{\prn{0,1}^*\phi= \prn{0,1}^*\prn{\lam{x}\phi\prn{0}\lor\prn{x\land\phi\prn{1}}}}.}

 ##{
  \begin{aligned}
   \prn{0,1}^*\prn{\lam{x}\phi\prn{0}\lor\prn{x\land\phi\prn{1}}}
   &=
   \prn{\phi\prn{0}\lor\prn{0\land\phi\prn{1}},\phi\prn{0}\lor\prn{1\land\phi\prn{1}}}
   \\
   &=
   \prn{\phi\prn{0}, \phi\prn{0}\lor\phi\prn{1}}
   \\
   &=
   \prn{\phi\prn{0},\phi\prn{1}}
   \\
   &=
   \prn{0,1}^*\phi
  \end{aligned}
 }

 \p{Above we have used the fact that #{\phi\prn{0}\leq\phi\prn{1}}, which follows from the factorisation property.}
}
